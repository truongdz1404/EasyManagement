@page "/reports"
@using AntDesign.Charts
@using AntDesign
@using EasyMN.Shared.Dtos
@using EasyMN.Shared.Dtos.Report
@inject EasyMN.Shared.IServices.IReportGrpcService ReportGrpcService
@inject EasyMN.Shared.IServices.IClassGrpcService ClassGrpcService

<PageTitle>Dashboard</PageTitle>

@if (stats != null)
{
    <div class="container-fluid py-4 bg-light">
        <div class="row mb-4">
            <div class="col-md-4 mb-3">
                <div class="card shadow-sm rounded-3 h-100 border-0 hover-card">
                    <div class="card-body text-center">
                        <h6 class="text-muted">Total Teachers</h6>
                        <h2 class="fw-bold text-primary">@(stats?.TotalTeachers ?? 0)</h2>
                    </div>
                </div>
            </div>

            <div class="col-md-4 mb-3">
                <div class="card shadow-sm rounded-3 h-100 border-0 hover-card">
                    <div class="card-body text-center">
                        <h6 class="text-muted">Total Classes</h6>
                        <h2 class="fw-bold text-success">@(stats?.TotalClasses ?? 0)</h2>
                    </div>
                </div>
            </div>

            <div class="col-md-4 mb-3">
                <div class="card shadow-sm rounded-3 h-100 border-0 hover-card">
                    <div class="card-body text-center">
                        <h6 class="text-muted">Total Students</h6>
                        <h2 class="fw-bold text-danger">@(stats?.TotalStudents ?? 0)</h2>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-4">
                <div class="card shadow-sm rounded-3 border-0">
                    <div class="card-header bg-white fw-bold">Student Distribution</div>
                    <div class="card-body">
                        @if (classStats != null && classStats.Any())
                        {
                            <Pie Data="pieChartData" Config="pieConfig" />
                        }
                        else
                        {
                            <div class="d-flex justify-content-center py-5">
                                <Spin />
                            </div>
                        }
                    </div>
                </div>
            </div>

            <div class="col-md-6 mb-4">
                <div class="card shadow-sm rounded-3 border-0">
                    <div class="card-header bg-white fw-bold">Students per Class</div>
                    <div class="card-body">
                        @if (classStats != null && classStats.Any())
                        {
                            <AntDesign.Charts.Column Data="columnChartData" Config="columnConfig" />
                        }
                        else
                        {
                            <div class="d-flex justify-content-center py-5">
                                <Spin />
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
}
else
{
    <div class="d-flex justify-content-center align-items-center" style="height:100vh">
        <Spin Size="large" />
    </div>
}

<style>
    .hover-card {
        transition: transform 0.2s, box-shadow 0.2s;
    }
    .hover-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.15);
    }
</style>
